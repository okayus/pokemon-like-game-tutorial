# åˆå­¦è€…å‘ã‘ï¼šGitHub Secretsã®è¨­å®šç¢ºèªç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
name: Test Cloudflare Secrets

on:
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã®ã¿

jobs:
  test-secrets:
    name: "ðŸ” Secretsãƒã‚§ãƒƒã‚¯"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ðŸ“‹ Secretsè¨­å®šçŠ¶æ³ç¢ºèª"
        run: |
          echo "## ðŸ” GitHub Secrets è¨­å®šç¢ºèª" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          # CLOUDFLARE_API_TOKEN ã®ç¢ºèª
          if [ -n "${{ secrets.CLOUDFLARE_API_TOKEN }}" ]; then
            echo "âœ… **CLOUDFLARE_API_TOKEN**: è¨­å®šæ¸ˆã¿" >> $GITHUB_STEP_SUMMARY
            echo "   - é•·ã•: ${#CF_API_TOKEN} æ–‡å­—" >> $GITHUB_STEP_SUMMARY
          else
            echo "âŒ **CLOUDFLARE_API_TOKEN**: æœªè¨­å®š" >> $GITHUB_STEP_SUMMARY
          fi
          
          # CLOUDFLARE_ACCOUNT_ID ã®ç¢ºèª
          if [ -n "${{ secrets.CLOUDFLARE_ACCOUNT_ID }}" ]; then
            echo "âœ… **CLOUDFLARE_ACCOUNT_ID**: è¨­å®šæ¸ˆã¿" >> $GITHUB_STEP_SUMMARY
            echo "   - å€¤: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}" >> $GITHUB_STEP_SUMMARY
          else
            echo "âŒ **CLOUDFLARE_ACCOUNT_ID**: æœªè¨­å®š" >> $GITHUB_STEP_SUMMARY
          fi
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ“ ç¢ºèªäº‹é …" >> $GITHUB_STEP_SUMMARY
          echo "- API Tokenã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ï¼‰" >> $GITHUB_STEP_SUMMARY
          echo "- Account IDã¯å…¬é–‹æƒ…å ±ã®ãŸã‚è¡¨ç¤ºã—ã¦ã„ã¾ã™" >> $GITHUB_STEP_SUMMARY
        env:
          CF_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}