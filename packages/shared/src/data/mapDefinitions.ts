// 初学者向け：マップの詳細データを定義するファイル
// 各マップの完全な情報（タイル、出口、メタデータ）を管理します

import { マップデータ, タイル, タイルタイプ } from '../types/map';

/**
 * タイルの簡易作成ヘルパー関数
 * 初学者向け：同じ設定のタイルを簡単に作るための関数です
 */
function タイル作成(タイプ: タイルタイプ, 歩行可能: boolean = true, 草むら: boolean = false): タイル {
  return { タイプ, 歩行可能, 草むら };
}

// 初学者向け：よく使うタイルを事前に定義しておきます
const 草地タイル = タイル作成(タイルタイプ.草地, true, true);
const 道タイル = タイル作成(タイルタイプ.道, true, false);
const 木タイル = タイル作成(タイルタイプ.木, false, false);
const 水タイル = タイル作成(タイルタイプ.水, false, false);
const 岩タイル = タイル作成(タイルタイプ.岩, false, false);
// const 壁タイル = タイル作成(タイルタイプ.壁, false, false); // 将来使用予定

/**
 * 始まりの町のマップデータ
 * 初学者向け：最初にプレイヤーがいる町のマップです
 */
export const 始まりの町: マップデータ = {
  id: "始まりの町",
  名前: "はじまりの町",
  幅: 20,
  高さ: 15,
  タイル: [
    // Y=0（上端）初学者向け：マップの一番上の行
    [木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 道タイル, 道タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル],
    // Y=1
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=2
    [木タイル, 草地タイル, 岩タイル, 草地タイル, 草地タイル, 木タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル, 草地タイル, 草地タイル, 岩タイル, 草地タイル, 木タイル],
    // Y=3
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=4
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=5
    [木タイル, 草地タイル, 木タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 木タイル, 草地タイル, 木タイル],
    // Y=6
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 水タイル, 水タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=7（中央）
    [木タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 道タイル, 木タイル],
    // Y=8
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=9
    [木タイル, 草地タイル, 岩タイル, 草地タイル, 草地タイル, 木タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル, 草地タイル, 草地タイル, 岩タイル, 草地タイル, 木タイル],
    // Y=10
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=11
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=12
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=13
    [木タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 道タイル, 道タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 草地タイル, 木タイル],
    // Y=14（下端）
    [木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 道タイル, 道タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル, 木タイル],
  ],
  出口: [
    {
      位置: { x: 9, y: 0 },
      移動先マップ: "北の森",
      移動先位置: { x: 9, y: 14 },
      説明: "北の森への道"
    },
    {
      位置: { x: 10, y: 0 },
      移動先マップ: "北の森",
      移動先位置: { x: 10, y: 14 },
      説明: "北の森への道"
    },
    {
      位置: { x: 0, y: 7 },
      移動先マップ: "西の平原",
      移動先位置: { x: 19, y: 7 },
      説明: "西の平原への道"
    },
    {
      位置: { x: 19, y: 7 },
      移動先マップ: "東の山道",
      移動先位置: { x: 0, y: 7 },
      説明: "東の山道への道"
    },
    {
      位置: { x: 9, y: 14 },
      移動先マップ: "南の海岸",
      移動先位置: { x: 9, y: 0 },
      説明: "南の海岸への道"
    },
    {
      位置: { x: 10, y: 14 },
      移動先マップ: "南の海岸",
      移動先位置: { x: 10, y: 0 },
      説明: "南の海岸への道"
    }
  ]
};

/**
 * 北の森のマップデータ
 * 初学者向け：木が多い森のマップです
 */
export const 北の森: マップデータ = {
  id: "北の森",
  名前: "きたのもり",
  幅: 20,
  高さ: 15,
  タイル: [
    // 簡略化した森のマップ（全体を木で囲み、中央に道を作る）
    ...Array(15).fill(null).map((_, y) => 
      Array(20).fill(null).map((_, x) => {
        // 境界は木
        if (x === 0 || x === 19 || y === 0 || y === 14) {
          return 木タイル;
        }
        // 中央の縦道
        if (x >= 9 && x <= 10) {
          return 道タイル;
        }
        // その他は草地（ポケモンが出現）
        return 草地タイル;
      })
    )
  ],
  出口: [
    {
      位置: { x: 9, y: 14 },
      移動先マップ: "始まりの町",
      移動先位置: { x: 9, y: 0 },
      説明: "始まりの町への道"
    },
    {
      位置: { x: 10, y: 14 },
      移動先マップ: "始まりの町",
      移動先位置: { x: 10, y: 0 },
      説明: "始まりの町への道"
    }
  ]
};

/**
 * 全マップのマスターデータ
 * 初学者向け：ゲーム内の全マップを管理する辞書（Dictionary）です
 */
export const 全マップデータ: Record<string, マップデータ> = {
  "始まりの町": 始まりの町,
  "北の森": 北の森,
  // 今後追加予定のマップ
  // "西の平原": 西の平原,
  // "東の山道": 東の山道,
  // "南の海岸": 南の海岸,
};

/**
 * マップIDからマップデータを取得する関数
 * 初学者向け：安全にマップデータを取得するための関数です
 */
export function マップ取得(マップID: string): マップデータ | undefined {
  return 全マップデータ[マップID];
}

/**
 * デフォルトの開始マップID
 * 初学者向け：ゲーム開始時のマップを指定します
 */
export const デフォルト開始マップID = "始まりの町";