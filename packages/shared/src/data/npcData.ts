// 初学者向け：NPCの基本データ定義
// このファイルではゲーム内のNPCと対話データを管理します

import { NPCデータ, 対話データ, メッセージタイプ, NPC向き } from '../types/npc';

/**
 * 村人Aの対話データ
 * 初学者向け：シンプルな挨拶をするNPCです
 */
export const 村人A対話データ: 対話データ = {
  id: "村人A対話",
  開始メッセージ: "挨拶",
  メッセージ: {
    "挨拶": {
      id: "挨拶",
      タイプ: メッセージタイプ.通常,
      テキスト: "こんにちは！始まりの町へようこそ！\nここは冒険の始まりの場所です。",
      次のメッセージ: "アドバイス"
    },
    "アドバイス": {
      id: "アドバイス", 
      タイプ: メッセージタイプ.通常,
      テキスト: "矢印キーで移動できます。\n北の森には珍しいポケモンがいるらしいですよ！"
    }
  }
};

/**
 * 案内人の対話データ
 * 初学者向け：選択肢のあるNPCです
 */
export const 案内人対話データ: 対話データ = {
  id: "案内人対話",
  開始メッセージ: "案内開始",
  メッセージ: {
    "案内開始": {
      id: "案内開始",
      タイプ: メッセージタイプ.通常,
      テキスト: "はじめまして、旅人さん！\n何かお手伝いできることはありますか？",
      次のメッセージ: "選択肢提示"
    },
    "選択肢提示": {
      id: "選択肢提示",
      タイプ: メッセージタイプ.選択肢,
      テキスト: "どのような情報が必要ですか？",
      選択肢: [
        {
          id: "マップ情報",
          テキスト: "マップについて教えて",
          次のメッセージ: "マップ説明"
        },
        {
          id: "操作方法",
          テキスト: "操作方法を教えて",
          次のメッセージ: "操作説明"
        },
        {
          id: "お礼",
          テキスト: "ありがとう",
          次のメッセージ: "お礼返し"
        }
      ]
    },
    "マップ説明": {
      id: "マップ説明",
      タイプ: メッセージタイプ.通常,
      テキスト: "この町には4つの出口があります。\n北は森、南は海岸、東は山道、西は平原です。",
      次のメッセージ: "また何か"
    },
    "操作説明": {
      id: "操作説明",
      タイプ: メッセージタイプ.通常,
      テキスト: "矢印キーで移動、Sキーでセーブ、\nLキーでロードできます。",
      次のメッセージ: "また何か"
    },
    "お礼返し": {
      id: "お礼返し",
      タイプ: メッセージタイプ.通常,
      テキスト: "どういたしまして！\n素敵な冒険を楽しんでくださいね。"
    },
    "また何か": {
      id: "また何か",
      タイプ: メッセージタイプ.選択肢,
      テキスト: "他にも何かありますか？",
      選択肢: [
        {
          id: "もう一度",
          テキスト: "もう一度聞く",
          次のメッセージ: "選択肢提示"
        },
        {
          id: "終了",
          テキスト: "ありがとうございました",
          次のメッセージ: "お礼返し"
        }
      ]
    }
  }
};

/**
 * 全対話データの管理
 * 初学者向け：すべての対話データを一元管理します
 */
export const 全対話データ: Record<string, 対話データ> = {
  "村人A対話": 村人A対話データ,
  "案内人対話": 案内人対話データ,
};

/**
 * 始まりの町のNPCデータ
 * 初学者向け：町にいるNPCの配置情報です
 */
export const 始まりの町NPCリスト: NPCデータ[] = [
  {
    id: "村人A",
    名前: "村人Aさん",
    位置: { x: 5, y: 5 },
    向き: NPC向き.下,
    スプライト: "villager_a",
    対話データID: "村人A対話"
  },
  {
    id: "案内人",
    名前: "案内人",
    位置: { x: 12, y: 8 },
    向き: NPC向き.左,
    スプライト: "guide",
    対話データID: "案内人対話"
  },
  {
    id: "散歩する村人",
    名前: "散歩好きの村人",
    位置: { x: 15, y: 10 },
    向き: NPC向き.上,
    スプライト: "villager_b",
    対話データID: "村人A対話", // 簡単のため村人Aと同じ対話を使用
    歩き回る: true,
    移動範囲: {
      最小x: 13,
      最大x: 17,
      最小y: 8,
      最大y: 12
    }
  }
];

/**
 * 全NPCデータの管理
 * 初学者向け：マップごとのNPCを管理します
 */
export const 全NPCデータ: Record<string, NPCデータ[]> = {
  "始まりの町": 始まりの町NPCリスト,
  // 他のマップのNPCは今後追加予定
  "北の森": [], // 現在は空
};

/**
 * 対話データを取得する関数
 * 初学者向け：安全に対話データを取得するための関数です
 */
export function 対話データ取得(対話データID: string): 対話データ | undefined {
  return 全対話データ[対話データID];
}

/**
 * マップのNPCリストを取得する関数
 * 初学者向け：指定されたマップのNPCを取得します
 */
export function マップNPCリスト取得(マップID: string): NPCデータ[] {
  return 全NPCデータ[マップID] || [];
}