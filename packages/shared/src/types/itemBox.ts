// 初学者向け：マップ上のアイテムボックスの型定義
// アイテムボックスは、マップ上に配置されるアイテム取得ポイントです

/**
 * アイテムボックスの状態
 * 初学者向け：アイテムボックスが開かれたかどうかを管理
 */
export type アイテムボックス状態 = '未開封' | '開封済み';

/**
 * アイテムボックスの種類
 * 初学者向け：見た目や演出を変えるための分類
 */
export type アイテムボックスタイプ = 
  | '通常'        // 通常の宝箱
  | 'レア'        // レアアイテム用の特別な箱
  | '隠し'        // 見つけにくい隠しアイテム
  | 'イベント';   // ストーリーで使う特別な箱

/**
 * アイテムボックスのデータ構造
 * 初学者向け：マップに配置される1つのアイテムボックスの情報
 */
export interface アイテムボックス {
  /** アイテムボックスのID（マップ内で一意） */
  id: string;
  
  /** マップ上の位置 */
  位置: {
    x: number;
    y: number;
  };
  
  /** ボックスの種類 */
  タイプ: アイテムボックスタイプ;
  
  /** 入っているアイテムのID */
  アイテムID: number;
  
  /** 入っているアイテムの個数 */
  個数: number;
  
  /** 現在の状態 */
  状態: アイテムボックス状態;
  
  /** 取得時のメッセージ（オプション） */
  メッセージ?: string;
  
  /** 取得条件（オプション）*/
  条件?: {
    /** 必要なアイテムID */
    必要アイテムID?: number;
    /** 必要なイベントフラグ */
    必要フラグ?: string;
  };
}

/**
 * マップアイテム配置データ
 * 初学者向け：特定のマップに配置されるすべてのアイテムボックス
 */
export interface マップアイテム配置 {
  /** マップID */
  マップID: string;
  
  /** このマップのアイテムボックス一覧 */
  アイテムボックス一覧: アイテムボックス[];
}

/**
 * プレイヤーのアイテムボックス開封記録
 * 初学者向け：どのアイテムボックスを開けたかを記録
 */
export interface アイテムボックス開封記録 {
  /** プレイヤーID */
  player_id: string;
  
  /** マップID */
  map_id: string;
  
  /** アイテムボックスID */
  box_id: string;
  
  /** 開封日時 */
  opened_at: string;
}

/**
 * アイテム取得イベントの結果
 * 初学者向け：アイテムボックスを開けた時の結果情報
 */
export interface アイテム取得イベント結果 {
  /** 成功したかどうか */
  success: boolean;
  
  /** 取得したアイテムの情報 */
  item?: {
    id: number;
    name: string;
    quantity: number;
    icon_url?: string;
  };
  
  /** メッセージ */
  message: string;
  
  /** エラーの場合の理由 */
  error?: string;
}