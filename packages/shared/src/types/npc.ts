// 初学者向け：NPCシステムの型定義
// このファイルではゲーム内のNPCと対話システムの構造を定義します

/**
 * 対話メッセージの種類
 * 初学者向け：メッセージの表示方法を指定します
 */
export enum メッセージタイプ {
  通常 = 'normal',
  選択肢 = 'choice',
  情報 = 'info',
}

/**
 * 選択肢の定義
 * 初学者向け：プレイヤーが選べる選択肢です
 */
export interface 選択肢 {
  /** 選択肢のID */
  id: string;
  /** 表示されるテキスト */
  テキスト: string;
  /** 選択時に実行されるアクション（オプション） */
  アクション?: string;
  /** 次のメッセージのID（オプション） */
  次のメッセージ?: string;
}

/**
 * 対話メッセージの定義
 * 初学者向け：NPCが話す1つのメッセージです
 */
export interface 対話メッセージ {
  /** メッセージのID */
  id: string;
  /** メッセージのタイプ */
  タイプ: メッセージタイプ;
  /** 表示されるテキスト */
  テキスト: string;
  /** 選択肢（選択肢タイプの場合のみ） */
  選択肢?: 選択肢[];
  /** 次のメッセージのID（オプション） */
  次のメッセージ?: string;
  /** メッセージを表示する条件（フラグ管理用、オプション） */
  表示条件?: Record<string, boolean>;
}

/**
 * 対話データの定義
 * 初学者向け：NPCの全ての会話を管理します
 */
export interface 対話データ {
  /** 対話データのID */
  id: string;
  /** 開始メッセージのID */
  開始メッセージ: string;
  /** 全メッセージのリスト */
  メッセージ: Record<string, 対話メッセージ>;
}

/**
 * NPCの向きの定義
 * 初学者向け：NPCがどちらを向いているかを表します
 */
export enum NPC向き {
  上 = 'up',
  下 = 'down',
  左 = 'left',
  右 = 'right',
}

/**
 * NPCの基本情報
 * 初学者向け：ゲーム内のNPCの全情報を管理します
 */
export interface NPCデータ {
  /** NPCのID */
  id: string;
  /** NPCの名前 */
  名前: string;
  /** NPCの位置 */
  位置: { x: number; y: number };
  /** NPCの向き */
  向き: NPC向き;
  /** NPCのスプライト画像名 */
  スプライト: string;
  /** 対話データのID */
  対話データID: string;
  /** NPCが歩き回るかどうか */
  歩き回る?: boolean;
  /** NPCの移動範囲（歩き回る場合） */
  移動範囲?: {
    最小x: number;
    最大x: number;
    最小y: number;
    最大y: number;
  };
}

/**
 * 対話状態の管理
 * 初学者向け：現在の対話の進行状況を追跡します
 */
export interface 対話状態 {
  /** 対話中かどうか */
  対話中: boolean;
  /** 現在対話しているNPCのID */
  現在のNPC?: string;
  /** 現在表示中のメッセージID */
  現在のメッセージ?: string;
  /** タイピングエフェクト中かどうか */
  タイピング中: boolean;
  /** 表示済みの文字数（タイピングエフェクト用） */
  表示文字数: number;
  /** プレイヤーが設定した会話フラグ */
  会話フラグ: Record<string, boolean>;
}
